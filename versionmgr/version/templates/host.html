{% extends 'base.html' %}

{% block breadcrumb %}
<li>cluster {% if host.cluster %}<a href="{% url 'cluster' host.cluster.id %}">{{ host.cluster.name }}{% else %}not set{% endif %}</a></li>
<li>host <a href="{% url 'host' host.id %}">{{ host.name }}</a></li>
{% endblock %}

{% block content %}
<h1>Host {{ host.name }}</h1>
<div class="well">
  <dl class="dl-horizontal">
    {% if host.cluster %}
    <dt>Cluster</dt>
    <dd><a href="{% url 'cluster' host.cluster.id %}">{{ host.cluster.name }}</a></dd>
    {% endif %}

    {% for name, value in host.cluster.attributes %}
    <dt>{{ name }}</dt>
    <dd>{{ value|md|safe }}</dd>
    {% endfor %}
    <hr/>

    {% for name, value in host.attributes %}
    <dt>{{ name }}</dt>
    <dd>{{ value|md|safe }}</dd>
    {% endfor %}
  </dl>
</div>

<h2>Deployments</h2>
<div class="deployments">
  {% for id, deployment in host.deployments.items %}
  <h3>{{ deployment.name }}</h3>
  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Application</th>
        <th>Installed version</th>
      </tr>
    </thead>
    <tbody>
      {% for app in deployment.apps %}
      <tr>
        <td>{% include 'frag_app.html'     with id=app.application.id name=app.application.name only %}</td>
        <td>{% include 'frag_version.html' with id=app.version.id name=app.version.name only %}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endfor %}
</div>
{% endblock %}
